<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Mobifix Service Orders</title>
<style>
  /* Reset & base */
  body {
    margin: 0; padding: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #f7f9fc;
    color: #222;
    min-height: 100vh;
  }
  a {
    color: #0a73ff;
    text-decoration: none;
  }
  a:hover {
    text-decoration: underline;
  }

  /* Container */
  .container {
    max-width: 900px;
    margin: 40px auto;
    padding: 0 20px 40px 20px;
  }

  h1, h2 {
    color: #0a73ff;
    margin-bottom: 25px;
    font-weight: 700;
  }

  p {
    font-size: 16px;
    margin-bottom: 30px;
    color: #444;
  }

  /* Services grid */
  .service-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit,minmax(240px,1fr));
    gap: 20px;
  }

  .service-card {
    background: white;
    border-radius: 12px;
    padding: 25px 20px;
    box-shadow: 0 4px 15px rgba(10, 115, 255, 0.15);
    cursor: pointer;
    transition: box-shadow 0.3s ease, transform 0.2s ease;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
  }
  .service-card:hover,
  .service-card:focus {
    box-shadow: 0 8px 30px rgba(10, 115, 255, 0.3);
    transform: translateY(-5px);
    outline: none;
  }

  .service-card h3 {
    margin: 0;
    font-size: 1.15rem;
    color: #0a73ff;
  }

  /* Modal overlay */
  #orderModal {
    position: fixed;
    top:0; left:0; right:0; bottom:0;
    background: rgba(0,0,0,0.5);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 9999;
  }

  /* Modal content */
  #orderModal .modal-content {
    background: #fff;
    padding: 35px 30px;
    border-radius: 16px;
    width: 90%;
    max-width: 440px;
    color: #222;
    box-shadow: 0 15px 35px rgba(10, 115, 255, 0.25);
    position: relative;
  }

  /* Close button */
  #orderModal .close-btn {
    position: absolute;
    top: 15px;
    right: 20px;
    font-size: 28px;
    color: #0a73ff;
    cursor: pointer;
    user-select: none;
  }
  #orderModal .close-btn:hover {
    color: #064ea6;
  }

  /* Form styles */
  #orderForm label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
    font-size: 14px;
  }
  #orderForm input[type="text"],
  #orderForm textarea {
    width: 100%;
    padding: 10px 14px;
    margin-bottom: 18px;
    border: 1.8px solid #cdd7e3;
    border-radius: 8px;
    font-size: 15px;
    font-family: inherit;
    color: #222;
    transition: border-color 0.3s ease;
  }
  #orderForm input[type="text"]:focus,
  #orderForm textarea:focus {
    border-color: #0a73ff;
    outline: none;
  }
  #orderForm textarea {
    resize: vertical;
    min-height: 80px;
  }
  #orderForm button {
    background: #0a73ff;
    border: none;
    padding: 14px 0;
    width: 100%;
    font-size: 17px;
    font-weight: 700;
    border-radius: 10px;
    cursor: pointer;
    color: white;
    box-shadow: 0 6px 15px rgba(10, 115, 255, 0.4);
    transition: background-color 0.3s ease;
  }
  #orderForm button:hover {
    background: #064ea6;
  }
</style>
</head>
<body>

<div class="container">
  <h1>Welcome to Mobifix</h1>
  <p>Choose your service below to place your order quickly and securely.</p>

  <div class="service-grid" id="servicesList">
    <!-- Service cards will appear here -->
  </div>
</div>

<!-- Order Modal Popup -->
<div id="orderModal" aria-hidden="true" role="dialog" aria-labelledby="modalTitle" aria-modal="true">
  <div class="modal-content">
    <span class="close-btn" title="Close">&times;</span>
    <h2 id="modalTitle">Place Your Order</h2>
    <form id="orderForm">
      <input type="hidden" name="service" id="serviceInput" />
      <label for="device">Device Model *</label>
      <input type="text" id="device" name="device" required placeholder="e.g., Redmi Note 10" />

      <label for="imei">IMEI / SN Number *</label>
      <input type="text" id="imei" name="imei" required placeholder="Enter IMEI or Serial Number" />

      <label for="problem">Problem Description *</label>
      <textarea id="problem" name="problem" required placeholder="Describe the issue..."></textarea>

      <button type="submit">Place Order</button>
    </form>
  </div>
</div>

<script src="https://cdn.emailjs.com/dist/email.min.js"></script>
<script>
  (function(){
    emailjs.init("zFrWZiZot24i7Mtx1");
  })();

  const services = [
    "FRP RESET",
    "DEMO RESET",
    "REGION UNLOCK",
    "MI ACCOUNT RESET",
    "XIAOMI FMI ON (MI ACCOUNT PERMANANT CLEAN DEVICE ONLY LOST MODE NOT SUPPORTED)",
    "APPLE FMI ON (ICLOUD LOCK PERMANANT CLEAN ONLY LOST MODE NOT SUPPORTED)"
  ];

  const servicesListEl = document.getElementById('servicesList');
  const orderModal = document.getElementById('orderModal');
  const serviceInput = document.getElementById('serviceInput');
  const closeBtn = orderModal.querySelector('.close-btn');
  const orderForm = document.getElementById('orderForm');

  services.forEach(service => {
    const card = document.createElement('div');
    card.className = 'service-card';
    card.tabIndex = 0;
    card.setAttribute('role', 'button');
    card.setAttribute('aria-pressed', 'false');
    card.innerHTML = `<h3>${service}</h3>`;
    card.addEventListener('click', () => openOrderForm(service));
    card.addEventListener('keypress', (e) => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        openOrderForm(service);
      }
    });
    servicesListEl.appendChild(card);
  });

  function openOrderForm(service) {
    serviceInput.value = service;
    orderModal.style.display = 'flex';
    orderModal.setAttribute('aria-hidden', 'false');
    document.getElementById('device').focus();
  }

  closeBtn.addEventListener('click', closeModal);
  orderModal.addEventListener('click', (e) => {
    if (e.target === orderModal) closeModal();
  });

  function closeModal() {
    orderModal.style.display = 'none';
    orderModal.setAttribute('aria-hidden', 'true');
    orderForm.reset();
  }

  orderForm.addEventListener('submit', function(event){
    event.preventDefault();

    const templateParams = {
      service: serviceInput.value,
      device: this.device.value.trim(),
      imei: this.imei.value.trim(),
      problem: this.problem.value.trim()
    };

    emailjs.send('service_qfgwnx9', 'template_xsl8mqj', templateParams)
      .then(() => {
        alert("Order placed successfully! We will contact you soon.");
        closeModal();
      }, (error) => {
        alert("Failed to send your order. Please try again.");
        console.error('EmailJS error:', error);
      });
  });
</script>

</body>
</html>
